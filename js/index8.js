var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(r,t,n)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,u=(e,r)=>{for(var t in r||(r={}))o.call(r,t)&&a(e,t,r[t]);if(n)for(var t of n(r))i.call(r,t)&&a(e,t,r[t]);return e},l=(e,n)=>r(e,t(n)),c=(e,r)=>{var t={};for(var a in e)o.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&n)for(var a of n(e))r.indexOf(a)<0&&i.call(e,a)&&(t[a]=e[a]);return t},s;import{r as f,aO as p,aU as d,R as v,j as h,a0 as y}from"./index.js";import{F as m,M as g}from"./index4.js";import{I as x}from"./index6.js";import{S as b,T as w,P as j}from"./Table.js";import{C as O}from"./index5.js";function S(e){var r=f.exports.useRef(e);r.current=f.exports.useMemo((function(){return e}),[e]);var t=f.exports.useRef();return t.current||(t.current=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.current.apply(this,e)}),t.current}var P=function e(r){return function(e,t){var n=f.exports.useRef(!1);r((function(){return function(){n.current=!1}}),[]),r((function(){if(n.current)return e();n.current=!0}),t)}}(f.exports.useEffect),T=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},C=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(T(arguments[r]));return e},F=function e(r,t){var n=t.manual,o=t.ready,i=void 0===o||o,a=t.defaultParams,u=void 0===a?[]:a,l=t.refreshDeps,c=void 0===l?[]:l,s=t.refreshDepsAction,p=f.exports.useRef(!1);return p.current=!1,P((function(){!n&&i&&(p.current=!0,r.run.apply(r,C(u)))}),[i]),P((function(){p.current||n||(p.current=!0,s?s():r.refresh())}),C(c)),{onBefore:function e(){if(!i)return{stopNow:!0}}}};F.onInit=function(e){var r=e.ready,t=void 0===r||r,n;return{loading:!e.manual&&t}};var E=F;function R(e,r){if(e===r)return!0;for(var t=0;t<e.length;t++)if(!Object.is(e[t],r[t]))return!1;return!0}function k(e,r){var t=f.exports.useRef({deps:r,obj:void 0,initialized:!1}).current;return!1!==t.initialized&&R(t.deps,r)||(t.deps=r,t.obj=e(),t.initialized=!0),t.obj}function I(e){var r=f.exports.useRef(e);return r.current=e,r}var A,z=function e(r){var t=I(r);f.exports.useEffect((function(){return function(){t.current()}}),[])},D=function(){return D=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},D.apply(this,arguments)},M=new Map,H=function e(r,t,n){var o=M.get(r);(null==o?void 0:o.timer)&&clearTimeout(o.timer);var i=void 0;t>-1&&(i=setTimeout((function(){M.delete(r)}),t)),M.set(r,D(D({},n),{timer:i}))},B=function e(r){return M.get(r)},V=new Map,q=function e(r){return V.get(r)},W=function e(r,t){V.set(r,t),t.then((function(e){return V.delete(r),e})).catch((function(){V.delete(r)}))},$={},N=function e(r,t){$[r]&&$[r].forEach((function(e){return e(t)}))},L=function e(r,t){return $[r]||($[r]=[]),$[r].push(t),function e(){var n=$[r].indexOf(t);$[r].splice(n,1)}},_=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Z=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(_(arguments[r]));return e},K,G=function e(r,t){var n=t.cacheKey,o=t.cacheTime,i=void 0===o?3e5:o,a=t.staleTime,u=void 0===a?0:a,l=t.setCache,c=t.getCache,s=f.exports.useRef(),p=f.exports.useRef(),d=function e(r,t){l?l(t):H(r,i,t),N(r,t.data)},v=function e(r,t){return void 0===t&&(t=[]),c?c(t):B(r)};return k((function(){if(n){var e=v(n);e&&Object.hasOwnProperty.call(e,"data")&&(r.state.data=e.data,r.state.params=e.params,(-1===u||(new Date).getTime()-e.time<=u)&&(r.state.loading=!1)),s.current=L(n,(function(e){r.setState({data:e})}))}}),[]),z((function(){var e;null===(e=s.current)||void 0===e||e.call(s)})),n?{onBefore:function e(r){var t=v(n,r);return t&&Object.hasOwnProperty.call(t,"data")?-1===u||(new Date).getTime()-t.time<=u?{loading:!1,data:null==t?void 0:t.data,returnNow:!0}:{data:null==t?void 0:t.data}:{}},onRequest:function e(r,t){var o=q(n);return o&&o!==p.current||(o=r.apply(void 0,Z(t)),p.current=o,W(n,o)),{servicePromise:o}},onSuccess:function e(t,o){var i;n&&(null===(i=s.current)||void 0===i||i.call(s),d(n,{data:t,params:o,time:(new Date).getTime()}),s.current=L(n,(function(e){r.setState({data:e})})))},onMutate:function e(t){var o;n&&(null===(o=s.current)||void 0===o||o.call(s),d(n,{data:t,params:r.state.params,time:(new Date).getTime()}),s.current=L(n,(function(e){r.setState({data:e})})))}}:{}},U=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},J=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(U(arguments[r]));return e},Q,X=function e(r,t){var n=t.debounceWait,o=t.debounceLeading,i=t.debounceTrailing,a=t.debounceMaxWait,u=f.exports.useRef(),l=f.exports.useMemo((function(){var e={};return void 0!==o&&(e.leading=o),void 0!==i&&(e.trailing=i),void 0!==a&&(e.maxWait=a),e}),[o,i,a]);return f.exports.useEffect((function(){if(n){var e=r.runAsync.bind(r);return u.current=p((function(e){e()}),n,l),r.runAsync=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return new Promise((function(t,n){var o;null===(o=u.current)||void 0===o||o.call(u,(function(){e.apply(void 0,J(r)).then(t).catch(n)}))}))},function(){var t;null===(t=u.current)||void 0===t||t.cancel(),r.runAsync=e}}}),[n,l]),n?{onCancel:function e(){var r;null===(r=u.current)||void 0===r||r.cancel()}}:{}},Y,ee=function e(r,t){var n=t.loadingDelay,o=f.exports.useRef();if(!n)return{};var i=function e(){o.current&&clearTimeout(o.current)};return{onBefore:function e(){return i(),o.current=setTimeout((function(){r.setState({loading:!0})}),n),{loading:!1}},onFinally:function e(){i()},onCancel:function e(){i()}}};function re(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function te(){return!re()||"hidden"!==document.visibilityState}var ne=[];function oe(e){return ne.push(e),function r(){var t=ne.indexOf(e);ne.splice(t,1)}}if(re()){var ie=function e(){if(te())for(var r=0;r<ne.length;r++){var t;(0,ne[r])()}};window.addEventListener("visibilitychange",ie,!1)}var ae,ue=function e(r,t){var n=t.pollingInterval,o=t.pollingWhenHidden,i=void 0===o||o,a=f.exports.useRef(),u=f.exports.useRef(),l=function e(){var r;a.current&&clearTimeout(a.current),null===(r=u.current)||void 0===r||r.call(u)};return P((function(){n||l()}),[n]),n?{onBefore:function e(){l()},onFinally:function e(){i||te()?a.current=setTimeout((function(){r.refresh()}),n):u.current=oe((function(){r.refresh()}))},onCancel:function e(){l()}}:{}},le=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ce=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(le(arguments[r]));return e};function se(e,r){var t=!1;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];t||(t=!0,e.apply(void 0,ce(n)),setTimeout((function(){t=!1}),r))}}function fe(){return!re()||void 0===navigator.onLine||navigator.onLine}var pe=[];function de(e){return pe.push(e),function r(){var t=pe.indexOf(e);pe.splice(t,1)}}if(re()){var ve=function e(){if(te()&&fe())for(var r=0;r<pe.length;r++){var t;(0,pe[r])()}};window.addEventListener("visibilitychange",ve,!1),window.addEventListener("focus",ve,!1)}var he,ye=function e(r,t){var n=t.refreshOnWindowFocus,o=t.focusTimespan,i=void 0===o?5e3:o,a=f.exports.useRef(),u=function e(){var r;null===(r=a.current)||void 0===r||r.call(a)};return f.exports.useEffect((function(){if(n){var e=se(r.refresh.bind(r),i);a.current=de((function(){e()}))}return function(){u()}}),[n,i]),z((function(){u()})),{}},me,ge=function e(r,t){var n=t.retryInterval,o=t.retryCount,i=f.exports.useRef(),a=f.exports.useRef(0),u=f.exports.useRef(!1);return o?{onBefore:function e(){u.current||(a.current=0),u.current=!1,i.current&&clearTimeout(i.current)},onSuccess:function e(){a.current=0},onError:function e(){if(a.current+=1,-1===o||a.current<=o){var t=null!=n?n:Math.min(1e3*Math.pow(2,a.current),3e4);i.current=setTimeout((function(){u.current=!0,r.refresh()}),t)}else a.current=0},onCancel:function e(){a.current=0,i.current&&clearTimeout(i.current)}}:{}},xe=p,be=d,we="Expected a function";function je(e,r,t){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError(we);return be(t)&&(n="leading"in t?!!t.leading:n,o="trailing"in t?!!t.trailing:o),xe(e,r,{leading:n,maxWait:r,trailing:o})}var Oe=je,Se=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Pe=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(Se(arguments[r]));return e},Te,Ce=function e(r,t){var n=t.throttleWait,o=t.throttleLeading,i=t.throttleTrailing,a=f.exports.useRef(),u={};return void 0!==o&&(u.leading=o),void 0!==i&&(u.trailing=i),f.exports.useEffect((function(){if(n){var e=r.runAsync.bind(r);return a.current=Oe((function(e){e()}),n,u),r.runAsync=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return new Promise((function(t,n){var o;null===(o=a.current)||void 0===o||o.call(a,(function(){e.apply(void 0,Pe(r)).then(t).catch(n)}))}))},function(){var t;r.runAsync=e,null===(t=a.current)||void 0===t||t.cancel()}}}),[n,o,i]),n?{onCancel:function e(){var r;null===(r=a.current)||void 0===r||r.cancel()}}:{}},Fe,Ee=function e(r){f.exports.useEffect((function(){null==r||r()}),[])},Re=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ke,Ie=function e(){var r,t=Re(f.exports.useState({}),2)[1];return f.exports.useCallback((function(){return t({})}),[])},Ae=function(){return Ae=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},Ae.apply(this,arguments)},ze=function(e,r,t,n){function o(e){return e instanceof t?e:new t((function(r){r(e)}))}return new(t||(t=Promise))((function(t,i){function a(e){try{l(n.next(e))}catch(r){i(r)}}function u(e){try{l(n.throw(e))}catch(r){i(r)}}function l(e){e.done?t(e.value):o(e.value).then(a,u)}l((n=n.apply(e,r||[])).next())}))},De=function(e,r){var t={label:0,sent:function e(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(r){return l([e,r])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(!(i=t.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){t=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(6===a[0]&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(u){a=[6,u],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Me=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t},He=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Be=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(He(arguments[r]));return e},Ve,qe=function(){function e(e,r,t,n){void 0===n&&(n={}),this.serviceRef=e,this.options=r,this.subscribe=t,this.initState=n,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=Ae(Ae(Ae({},this.state),{loading:!r.manual}),n)}return e.prototype.setState=function(e){void 0===e&&(e={}),this.state=Ae(Ae({},this.state),e),this.subscribe()},e.prototype.runPluginHandler=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var n=this.pluginImpls.map((function(t){var n;return null===(n=t[e])||void 0===n?void 0:n.call.apply(n,Be([t],r))})).filter(Boolean);return Object.assign.apply(Object,Be([{}],n))},e.prototype.runAsync=function(){for(var e,r,t,n,o,i,a,u,l,c,s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];return ze(this,void 0,void 0,(function(){var f,p,d,v,h,y,m,g,x,b,w;return De(this,(function(j){switch(j.label){case 0:if(this.count+=1,f=this.count,p=this.runPluginHandler("onBefore",s),d=p.stopNow,v=void 0!==d&&d,h=p.returnNow,y=void 0!==h&&h,m=Me(p,["stopNow","returnNow"]),v)return[2,new Promise((function(){}))];if(this.setState(Ae({loading:!0,params:s},m)),y)return[2,Promise.resolve(m.data)];null===(r=(e=this.options).onBefore)||void 0===r||r.call(e,s),j.label=1;case 1:return j.trys.push([1,3,,4]),(g=this.runPluginHandler("onRequest",this.serviceRef.current,s).servicePromise)||(g=(w=this.serviceRef).current.apply(w,Be(s))),[4,g];case 2:return x=j.sent(),f!==this.count?[2,new Promise((function(){}))]:(this.setState({data:x,error:void 0,loading:!1}),null===(n=(t=this.options).onSuccess)||void 0===n||n.call(t,x,s),this.runPluginHandler("onSuccess",x,s),null===(i=(o=this.options).onFinally)||void 0===i||i.call(o,s,x,void 0),f===this.count&&this.runPluginHandler("onFinally",s,x,void 0),[2,x]);case 3:if(b=j.sent(),f!==this.count)return[2,new Promise((function(){}))];throw this.setState({error:b,loading:!1}),null===(u=(a=this.options).onError)||void 0===u||u.call(a,b,s),this.runPluginHandler("onError",b,s),null===(c=(l=this.options).onFinally)||void 0===c||c.call(l,s,void 0,b),f===this.count&&this.runPluginHandler("onFinally",s,void 0,b),b;case 4:return[2]}}))}))},e.prototype.run=function(){for(var e=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this.runAsync.apply(this,Be(r)).catch((function(r){e.options.onError||console.error(r)}))},e.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},e.prototype.refresh=function(){this.run.apply(this,Be(this.state.params||[]))},e.prototype.refreshAsync=function(){return this.runAsync.apply(this,Be(this.state.params||[]))},e.prototype.mutate=function(e){var r;r="function"==typeof e?e(this.state.data):e,this.runPluginHandler("onMutate",r),this.setState({data:r})},e}(),We=function(){return We=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},We.apply(this,arguments)},$e=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t},Ne=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Le=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(Ne(arguments[r]));return e};function _e(e,r,t){void 0===r&&(r={}),void 0===t&&(t=[]);var n=r.manual,o=void 0!==n&&n,i=$e(r,["manual"]),a=We({manual:o},i),u=I(e),l=Ie(),c=k((function(){var e=t.map((function(e){var r;return null===(r=null==e?void 0:e.onInit)||void 0===r?void 0:r.call(e,a)})).filter(Boolean);return new qe(u,a,l,Object.assign.apply(Object,Le([{}],e)))}),[]);return c.options=a,c.pluginImpls=t.map((function(e){return e(c,a)})),Ee((function(){if(!o){var e=c.state.params||r.defaultParams||[];c.run.apply(c,Le(e))}})),z((function(){c.cancel()})),{loading:c.state.loading,data:c.state.data,error:c.state.error,params:c.state.params||[],cancel:S(c.cancel.bind(c)),refresh:S(c.refresh.bind(c)),refreshAsync:S(c.refreshAsync.bind(c)),run:S(c.run.bind(c)),runAsync:S(c.runAsync.bind(c)),mutate:S(c.mutate.bind(c))}}var Ze=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ke=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(Ze(arguments[r]));return e};function Ge(e,r,t){return _e(e,r,Ke(t||[],[X,ee,ue,ye,Ce,E,G,ge]))}var Ue=function(){return Ue=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},Ue.apply(this,arguments)},Je=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t},Qe=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Xe=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(Qe(arguments[r]));return e},Ye,er=function e(r,t){var n;void 0===t&&(t={});var o=t.defaultPageSize,i=void 0===o?10:o,a=Je(t,["defaultPageSize"]),u=Ge(r,Ue({defaultParams:[{current:1,pageSize:i}],refreshDepsAction:function e(){m(1)}},a)),l=u.params[0]||{},c=l.current,s=void 0===c?1:c,p=l.pageSize,d=void 0===p?i:p,v=(null===(n=u.data)||void 0===n?void 0:n.total)||0,h=f.exports.useMemo((function(){return Math.ceil(v/d)}),[d,v]),y=function e(r,t){var n=r<=0?1:r,o=t<=0?1:t,i=Math.ceil(v/o);n>i&&(n=Math.max(1,i));var a=Qe(u.params||[]),l=a[0],c=void 0===l?{}:l,s=a.slice(1);u.run.apply(u,Xe([Ue(Ue({},c),{current:n,pageSize:o})],s))},m=function e(r){y(r,d)},g=function e(r){y(s,r)};return Ue(Ue({},u),{pagination:{current:s,pageSize:d,total:v,totalPage:h,onChange:S(y),changeCurrent:S(m),changePageSize:S(g)}})},rr=function(){return rr=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},rr.apply(this,arguments)},tr=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t},nr=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},or=function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(nr(arguments[r]));return e},ir,ar=function e(r,t){var n;void 0===t&&(t={});var o=t.form,i=t.defaultType,a=void 0===i?"simple":i,u=t.defaultParams,l=t.manual,c=void 0!==l&&l,s=t.refreshDeps,p=void 0===s?[]:s,d=t.ready,v=void 0===d||d,h=tr(t,["form","defaultType","defaultParams","manual","refreshDeps","ready"]),y=er(r,rr({manual:!0},h)),m=y.params,g=void 0===m?[]:m,x=y.run,b=g[2]||{},w=nr(f.exports.useState((null==b?void 0:b.type)||a),2),j=w[0],O=w[1],T=f.exports.useRef({}),C=!!(null==o?void 0:o.getInternalHooks),F=function e(){if(!o)return{};if(C)return o.getFieldsValue(null,(function(){return!0}));var r=o.getFieldsValue(),t={};return Object.keys(r).forEach((function(e){o.getFieldInstance&&!o.getFieldInstance(e)||(t[e]=r[e])})),t},E=function e(){if(!o)return Promise.resolve({});var r=F(),t=Object.keys(r);return C?o.validateFields(t):new Promise((function(e,r){o.validateFields(t,(function(t,n){t?r(t):e(n)}))}))},R=function e(){if(o){if(C)return o.setFieldsValue(T.current);var r={};Object.keys(T.current).forEach((function(e){o.getFieldInstance&&!o.getFieldInstance(e)||(r[e]=T.current[e])})),o.setFieldsValue(r)}},k=function e(){var r=F();T.current=rr(rr({},T.current),r),O((function(e){return"simple"===e?"advance":"simple"}))},I=function e(r){v&&setTimeout((function(){E().then((function(e){void 0===e&&(e={});var n=r||rr(rr({pageSize:t.defaultPageSize||10},(null==g?void 0:g[0])||{}),{current:1});o?(T.current=rr(rr({},T.current),e),x(n,e,{allFormData:T.current,type:j})):x(n)})).catch((function(e){return e}))}))},A=function e(){o&&o.resetFields(),I()},z=function e(r){var t;null===(t=null==r?void 0:r.preventDefault)||void 0===t||t.call(r),I()},D=function e(r,t,n){var o=nr(g||[]),i=o[0],a=o.slice(1);x.apply(void 0,or([rr(rr({},i),{current:r.current,pageSize:r.pageSize,filters:t,sorter:n})],a))};f.exports.useEffect((function(){if(g.length>0)return T.current=(null==b?void 0:b.allFormData)||{},R(),void x.apply(void 0,or(g));!c&&v&&(T.current=(null==u?void 0:u[1])||{},R(),I(null==u?void 0:u[0]))}),[]),P((function(){v&&R()}),[j]);var M=f.exports.useRef(!1);return M.current=!1,P((function(){!c&&v&&(M.current=!0,o&&o.resetFields(),T.current=(null==u?void 0:u[1])||{},R(),I(null==u?void 0:u[0]))}),[v]),P((function(){M.current||v&&(c||(M.current=!0,y.pagination.changeCurrent(1)))}),or(p)),rr(rr({},y),{tableProps:{dataSource:(null===(n=y.data)||void 0===n?void 0:n.list)||[],loading:y.loading,onChange:S(D),pagination:{current:y.pagination.current,pageSize:y.pagination.pageSize,total:y.pagination.total}},search:{submit:S(z),type:j,changeType:S(k),reset:S(A)}})};function ur(e){return"function"==typeof e}var lr=function(){return lr=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},lr.apply(this,arguments)},cr=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},sr,fr=function e(r){var t=cr(f.exports.useState(r),2),n=t[0],o=t[1],i;return[n,f.exports.useCallback((function(e){o((function(r){var t=ur(e)?e(r):e;return t?lr(lr({},r),t):r}))}),[])]};const pr=m.Item,dr={labelCol:{span:4},wrapperCol:{span:20}},vr=(e,r)=>{const{actionType:t}=e,n=e.dataSource||{},[o]=m.useForm();f.exports.useEffect((()=>{if(o.resetFields(),n){const e={nat:n.nat,email:n.email,phone:n.phone,gender:n.gender};o.setFieldsValue(e)}}),[o,n]),f.exports.useImperativeHandle(r,(()=>({async getValues(e){await o.validateFields().then((r=>{e(r)})).catch((e=>{const{errorFields:r}=e;console.log("error",r)}))}})));const i="preview"===t;return h.exports.jsx(h.exports.Fragment,{children:h.exports.jsxs(m,l(u({labelAlign:i?"left":"right",form:o},dr),{children:[h.exports.jsx(pr,{label:"nat:",required:!i,name:"nat",rules:[{required:!0,message:"\u5fc5\u586b"}],children:i?h.exports.jsx("span",{children:n.nat}):h.exports.jsx(x,{})}),h.exports.jsx(pr,{label:"\u90ae\u7bb1:",validateTrigger:"onBlur",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1",pattern:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/}],required:!i,name:"email",children:i?h.exports.jsx("span",{children:n.email}):h.exports.jsx(x,{})}),h.exports.jsx(pr,{label:"\u624b\u673a\u53f7:",required:!i,name:"phone",validateTrigger:"onBlur",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7",pattern:/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/}],children:i?h.exports.jsx("span",{children:n.phone}):h.exports.jsx(x,{})}),h.exports.jsx(pr,{label:"\u6027\u522b:",required:!i,rules:[{required:!0,message:"\u5fc5\u586b"}],name:"gender",children:h.exports.jsx(b,{disabled:i,options:[{value:"male",label:"\u7537"},{value:"female",label:"\u5973"}]})})]}))})};var hr=v.forwardRef(vr);const yr=e=>{switch(e){case"add":default:return"\u6dfb\u52a0\u5458\u5de5";case"edit":return"\u7f16\u8f91\u5458\u5de5";case"preview":return"\u9884\u89c8\u5458\u5de5"}},mr=e=>{const r=e,{actionType:t,dataSource:n,onOk:o=(()=>{})}=r,i=c(r,["actionType","dataSource","onOk"]),a=f.exports.useRef(null),s=f.exports.useCallback((()=>{var e;if("preview"===t)return o(null);console.log(a.current),null==(e=a.current)||e.getValues((e=>{console.log(e),o(e)}))}),[t,o]);return h.exports.jsx(g,l(u({title:yr(t),style:{width:600}},i),{onOk:s,children:h.exports.jsx(hr,{ref:a,actionType:t,dataSource:n})}))},gr=undefined;var xr="_DialogTable_vwy60_1";const br=({current:e,pageSize:r},t)=>{if(!t.status||"normal"===t.status){let n=`page=${e}&size=${r}`;return Object.entries(t).forEach((([e,r])=>{r&&(n+=`&${e}=${r}`)})),fetch(`https://randomuser.me/api?results=${r}&${n}`).then((e=>e.json())).then((e=>({total:55,list:e.results.slice(0,10)})))}return"empty"===t.status?Promise.resolve([]):"exception"===t.status?new Promise(((e,r)=>{setTimeout((()=>{r(new Error("data exception"))}),1e3)})):Promise.resolve([])},wr={nat:140,email:500,phone:500,gender:140,operation:150},jr=()=>{const[e,r]=fr({columnWidth:wr,optCol:null,actionType:"preview",actionVisible:!1}),{actionVisible:t,columnWidth:n,optCol:o}=e,[i,a]=f.exports.useState(""),[c]=m.useForm(),{pagination:s,tableProps:p,search:d}=ar(br,{form:c}),{reset:v}=d;console.log(p);const x=f.exports.useCallback((({actionType:e,dataSource:t})=>{r({actionType:e,optCol:t,actionVisible:!0})}),[r]),b=f.exports.useCallback((()=>{r({actionVisible:!1})}),[r]),S=f.exports.useCallback((()=>{const{actionType:r}=e;"preview"!==r?(y.success("add"===r?"\u6dfb\u52a0\u6210\u529f!":"\u7f16\u8f91\u6210\u529f!"),v(),b()):b()}),[b,v,e]),P=f.exports.useCallback((e=>{e&&a(e.nat)}),[v]),T=(e,r)=>{const t=r;return h.exports.jsxs("div",{children:[h.exports.jsx("a",{type:"primary",onClick:()=>x({actionType:"edit",dataSource:t}),children:"\u7f16\u8f91"}),"\xa0\xa0",h.exports.jsx("a",{type:"primary",onClick:()=>P(t),children:"\u5220\u9664"}),"\xa0\xa0",h.exports.jsx("a",{type:"primary",onClick:()=>x({actionType:"preview",dataSource:t}),children:"\u67e5\u770b"})]})};return h.exports.jsxs("div",{className:xr,children:[h.exports.jsxs(O,{children:[h.exports.jsxs(w,l(u({},p),{rowKey:"email",pagination:!1,bordered:!0,children:[h.exports.jsx(w.Column,{title:"nat",dataIndex:"nat",width:n.nat}),h.exports.jsx(w.Column,{title:"email",dataIndex:"email",width:n.email}),h.exports.jsx(w.Column,{title:"phone",dataIndex:"phone",width:n.phone}),h.exports.jsx(w.Column,{title:"gender",dataIndex:"gender",width:n.gender}),h.exports.jsx(w.Column,{title:"\u64cd\u4f5c",width:n.operation,render:T})]})),h.exports.jsx(j,u({style:{marginTop:16,textAlign:"right"},showTotal:e=>h.exports.jsxs(h.exports.Fragment,{children:["\u5171 ",h.exports.jsx("a",{children:e})," \u4e2a\u8bb0\u5f55"]})},s))]}),h.exports.jsx(mr,{visible:t,actionType:e.actionType,dataSource:o,onOk:S,onClose:b,onCancel:b}),h.exports.jsx(g,{title:"\u5220\u9664\u63d0\u9192",visible:!!i,onOk:()=>{y.success(`${i}\u5220\u9664\u6210\u529f!`),v(),a("")},onCancel:()=>a(""),children:h.exports.jsxs("p",{children:["\u786e\u5b9a\u5220\u9664 ",i,"\u5417"]})}),";"]})};function Or(){return h.exports.jsx("div",{className:"AntdTable-page",children:h.exports.jsx(jr,{})})}const Sr=Or;export{Sr as default};
